<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cuestionario de Intereses</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }
        .seccion-cuestionario {
            margin-bottom: 30px;
        }
        h2 {
            color: #2c3e50;
            border-bottom: 2px solid #3498db;
            padding-bottom: 5px;
        }
        h3 {
            color: #34495e;
            margin-top: 20px;
        }
        label {
            display: block;
            margin: 8px 0;
            cursor: pointer;
        }
        input[type="radio"] {
            margin-right: 8px;
        }
        textarea {
            width: 100%;
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-family: Arial, sans-serif;
            box-sizing: border-box;
        }
        .navigation {
            margin-top: 30px;
            text-align: center;
        }
        button {
            background-color: #3498db;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            margin: 0 10px;
            font-size: 16px;
        }
        button:hover {
            background-color: #2980b9;
        }
        button:disabled {
            background-color: #bdc3c7;
            cursor: not-allowed;
        }
        #btn-submit {
            background-color: #27ae60;
        }
        #btn-submit:hover {
            background-color: #229954;
        }

        /* Estilos para la p√°gina de carga */
        .loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(255, 255, 255, 0.95);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }

        .loading-container {
            text-align: center;
            padding: 40px;
            background: white;
            border-radius: 10px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            max-width: 400px;
            width: 90%;
        }

        .loading-spinner {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #3498db;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .loading-text {
            font-size: 18px;
            color: #2c3e50;
            margin-bottom: 10px;
            font-weight: bold;
        }

        .loading-subtext {
            font-size: 14px;
            color: #7f8c8d;
        }

        .success-icon {
            font-size: 60px;
            color: #27ae60;
            margin-bottom: 20px;
            animation: bounceIn 0.6s;
        }

        @keyframes bounceIn {
            0% { transform: scale(0); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }
    </style>
</head>
<body>

    <h1 style="text-align: center;">Cu√©ntame un poco sobre ti</h1>

    <form id="cuestionario-form">

        <!-- SECCI√ìN 1 -->
        <div id="seccion1" class="seccion-cuestionario">
            <h2>1. Lo que te motiva</h2>
            
            <h3>Si tuvieras un fin de semana libre, ¬øqu√© proyecto te gustar√≠a emprender?</h3>
            <label><input type="radio" name="pregunta1" value="fiesta" required> Organizar una fiesta o evento para tus amigos.</label>
            <label><input type="radio" name="pregunta1" value="construir" required> Construir algo con tus manos (un mueble, un circuito electr√≥nico, un robot, etc.).</label>
            <label><input type="radio" name="pregunta1" value="hobby" required> Sumirte de lleno en un hobby que te apasione.</label>
            <label><input type="radio" name="pregunta1" value="investigar" required> Investigar a fondo un tema que te cause mucha curiosidad.</label>

            <h3>¬øQu√© te hace sentir m√°s vivo(a) y emocionado(a)?</h3>
            <label><input type="radio" name="pregunta2" value="ayudar" required> Ayudar a alguien a resolver un problema.</label>
            <label><input type="radio" name="pregunta2" value="idea" required> Tener una buena idea que nadie m√°s hab√≠a pensado.</label>
            <label><input type="radio" name="pregunta2" value="logro" required> Lograr un objetivo dif√≠cil, ya sea por tu cuenta o en equipo.</label>
            <label><input type="radio" name="pregunta2" value="crear" required> Crear algo que te guste mucho.</label>
            
            <h3>Piensa en un tema sobre el que podr√≠as hablar durante horas sin aburrirte. ¬øCu√°l es y por qu√© te fascina tanto?</h3>
            <textarea name="pregunta3" rows="4" placeholder="Escribe tu respuesta aqu√≠..." required></textarea>
        </div>

        <!-- SECCI√ìN 2 -->
        <div id="seccion2" class="seccion-cuestionario" style="display: none;">
            <h2>2. Tus Habilidades y Talentos</h2>

            <h3>Cuando trabajas en equipo, ¬øqu√© rol sueles asumir?</h3>
            <label><input type="radio" name="pregunta4" value="lider" required> El l√≠der: Quien organiza y dirige al grupo.</label>
            <label><input type="radio" name="pregunta4" value="colaborador" required> El colaborador: Quien apoya y hace que las cosas pasen.</label>
            <label><input type="radio" name="pregunta4" value="experto" required> El experto: Quien se encarga de la parte m√°s t√©cnica o dif√≠cil.</label>
            <label><input type="radio" name="pregunta4" value="creativo" required> El creativo: Quien aporta las ideas m√°s originales y fuera de lo com√∫n.</label>

            <h3>En una escala del 1 al 5, ¬øqu√© tan bueno te consideras para comunicarte y persuadir a los dem√°s?</h3>
            <label><input type="radio" name="pregunta5" value="1" required> 1 üòû Nada bueno</label>
            <label><input type="radio" name="pregunta5" value="2" required> 2 üòï Poco bueno</label>
            <label><input type="radio" name="pregunta5" value="3" required> 3 üòê Regular</label>
            <label><input type="radio" name="pregunta5" value="4" required> 4 üôÇ Bueno</label>
            <label><input type="radio" name="pregunta5" value="5" required> 5 üòÑ Muy bueno</label>
            
            <h3>Cuando te enfrentas a un problema, ¬øcu√°l es tu primera reacci√≥n?</h3>
            <label><input type="radio" name="pregunta6" value="logica" required> Buscar una soluci√≥n l√≥gica, paso a paso.</label>
            <label><input type="radio" name="pregunta6" value="ayuda" required> Pedir ayuda o consejo a alguien de confianza.</label>
            <label><input type="radio" name="pregunta6" value="creativa" required> Intentar soluciones creativas y poco convencionales.</label>
            <label><input type="radio" name="pregunta6" value="internet" required> Buscar tutoriales o informaci√≥n en internet.</label>

            <h3>Cu√©ntame sobre algo que hayas logrado y que te haya hecho sentir realmente orgulloso(a). ¬øQu√© hiciste para conseguirlo?</h3>
            <textarea name="pregunta7" rows="4" placeholder="Escribe tu respuesta aqu√≠..." required></textarea>
        </div>

        <!-- SECCI√ìN 3 -->
        <div id="seccion3" class="seccion-cuestionario" style="display: none;">
            <h2>3. Tu Estilo de Trabajo</h2>
            
            <h3>¬øC√≥mo te imaginas tu ambiente de trabajo ideal?</h3>
            <label><input type="radio" name="pregunta8" value="tranquilo" required> Una oficina tranquila, con tu propio espacio personal.</label>
            <label><input type="radio" name="pregunta8" value="activo" required> Un lugar con mucha gente y actividad, como un set de filmaci√≥n o un hospital.</label>
            <label><input type="radio" name="pregunta8" value="aire-libre" required> Un entorno que te permita moverte y estar al aire libre.</label>
            <label><input type="radio" name="pregunta8" value="creativo" required> Un estudio o taller creativo.</label>

            <h3>¬øQu√© preferir√≠as hacer todos los d√≠as?</h3>
            <label><input type="radio" name="pregunta9" value="diferente" required> Hacer un mont√≥n de cosas diferentes para evitar la monoton√≠a.</label>
            <label><input type="radio" name="pregunta9" value="monotono" required> Hacer la misma tarea, pero ser el mejor en ella.</label>
            <label><input type="radio" name="pregunta9" value="mezcla" required> Una mezcla de ambas.</label>

            <h3>¬øC√≥mo prefieres trabajar?</h3>
            <label><input type="radio" name="pregunta10" value="solo" required> Solo(a) y a mi propio ritmo.</label>
            <label><input type="radio" name="pregunta10" value="equipo" required> En equipo, con mucha colaboraci√≥n.</label>
            <label><input type="radio" name="pregunta10" value="liderando" required> Liderando y dirigiendo a un grupo.</label>
            
            <h3>¬øC√≥mo prefieres que sean tus d√≠as de trabajo?</h3>
            <label><input type="radio" name="pregunta11" value="remoto-fijo" required> Remoto con horario fijo.</label>
            <label><input type="radio" name="pregunta11" value="remoto-flexible" required> Remoto con horarios flexibles.</label>
            <label><input type="radio" name="pregunta11" value="presencial-fijo" required> Presencial con horario fijo.</label>
            <label><input type="radio" name="pregunta11" value="presencial-flexible" required> Presencial con horarios flexibles.</label>
            <label><input type="radio" name="pregunta11" value="no-limito" required> No me limito a algo espec√≠fico.</label>
            
            <h3>Describe tu d√≠a de trabajo ideal.</h3>
            <textarea name="pregunta12" rows="4" placeholder="Escribe tu respuesta aqu√≠..." required></textarea>
        </div>

        <!-- SECCI√ìN 4 -->
        <div id="seccion4" class="seccion-cuestionario" style="display: none;">
            <h2>4. Tus Valores y Motivaciones</h2>

            <h3>Si tuvieras que elegir, ¬øqu√© es lo m√°s importante para ti en un trabajo?</h3>
            <label><input type="radio" name="pregunta13" value="dinero" required> Ganar mucho dinero.</label>
            <label><input type="radio" name="pregunta13" value="ayudar" required> Sentir que mi trabajo es importante y ayuda a los dem√°s.</label>
            <label><input type="radio" name="pregunta13" value="tiempo" required> Tener un horario flexible y mucho tiempo libre.</label>
            <label><input type="radio" name="pregunta13" value="creativo" required> Que sea divertido y creativo.</label>

            <h3>¬øQu√© te har√≠a sentir m√°s realizado(a)?</h3>
            <label><input type="radio" name="pregunta14" value="respeto" required> Obtener el respeto y reconocimiento de otros.</label>
            <label><input type="radio" name="pregunta14" value="causa" required> Sentir que estoy ayudando a una causa que me importa.</label>
            <label><input type="radio" name="pregunta14" value="valioso" required> Saber que mi trabajo es valioso para la sociedad.</label>

            <h3>Si el dinero no fuera un problema, ¬øa qu√© dedicar√≠as tu vida?</h3>
            <textarea name="pregunta15" rows="4" placeholder="Escribe tu respuesta aqu√≠..." required></textarea>
        </div>

        <!-- SECCI√ìN 5 -->
        <div id="seccion5" class="seccion-cuestionario" style="display: none;">
            <h2>5. Tu Futuro</h2>

            <h3>En una escala del 1 al 5, ¬øqu√© tan seguro(a) te sientes de lo que quieres estudiar o hacer en el futuro?</h3>
            <label><input type="radio" name="pregunta16" value="1" required> 1 üòû Nada seguro</label>
            <label><input type="radio" name="pregunta16" value="2" required> 2 üòï Poco seguro</label>
            <label><input type="radio" name="pregunta16" value="3" required> 3 üòê Regular</label>
            <label><input type="radio" name="pregunta16" value="4" required> 4 üôÇ Bastante seguro</label>
            <label><input type="radio" name="pregunta16" value="5" required> 5 üòÑ Muy seguro</label>

            <h3>¬øQu√© es lo que m√°s te asusta al pensar en tu futuro profesional?</h3>
            <label><input type="radio" name="pregunta17" value="no-guste" required> Elegir algo que no me guste.</label>
            <label><input type="radio" name="pregunta17" value="no-trabajo" required> No encontrar trabajo despu√©s.</label>
            <label><input type="radio" name="pregunta17" value="no-expectativas" required> No cumplir con las expectativas de mi familia.</label>
            
            <h3>Imag√≠nate dentro de 10 a√±os. ¬øA qu√© te ves dedic√°ndote?</h3>
            <textarea name="pregunta18" rows="4" placeholder="Escribe tu respuesta aqu√≠..." required></textarea>
        </div>

        <div class="navigation">
            <button type="button" id="btn-anterior">‚Üê Anterior</button>
            <button type="button" id="btn-siguiente">Siguiente ‚Üí</button>
            <button type="submit" id="btn-submit" style="display: none;"><ion-icon name="shield-checkmark"></ion-icon> Enviar Respuestas</button>
        </div>

    </form>

    <!-- Overlay de carga -->
    <div id="loading-overlay" class="loading-overlay">
        <div class="loading-container">
            <div id="loading-spinner" class="loading-spinner"></div>
            <div id="success-icon" class="success-icon" style="display: none;"><ion-icon name="shield-checkmark"></ion-icon></div>
            <div id="loading-text" class="loading-text">Guardando respuestas...</div>
            <div id="loading-subtext" class="loading-subtext">Por favor espera un momento</div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const formulario = document.getElementById('cuestionario-form');
            const secciones = ['seccion1', 'seccion2', 'seccion3', 'seccion4', 'seccion5'];
            let seccionActual = 0;
            const btnAnterior = document.getElementById('btn-anterior');
            const btnSiguiente = document.getElementById('btn-siguiente');
            const btnSubmit = document.getElementById('btn-submit');
            const loadingOverlay = document.getElementById('loading-overlay');
            const loadingSpinner = document.getElementById('loading-spinner');
            const successIcon = document.getElementById('success-icon');
            const loadingText = document.getElementById('loading-text');
            const loadingSubtext = document.getElementById('loading-subtext');

            function actualizarBotones() {
                btnAnterior.style.display = seccionActual === 0 ? 'none' : 'inline-block';
                
                if (seccionActual === secciones.length - 1) {
                    btnSiguiente.style.display = 'none';
                    btnSubmit.style.display = 'inline-block';
                } else {
                    btnSiguiente.style.display = 'inline-block';
                    btnSubmit.style.display = 'none';
                }
            }

            function cambiarSeccion(direccion) {
                document.getElementById(secciones[seccionActual]).style.display = 'none';
                seccionActual += direccion;
                document.getElementById(secciones[seccionActual]).style.display = 'block';
                
                actualizarBotones();
                window.scrollTo(0, 0);
            }
            
            btnAnterior.addEventListener('click', function() {
                if (seccionActual > 0) cambiarSeccion(-1);
            });

            btnSiguiente.addEventListener('click', function() {
                if (seccionActual < secciones.length - 1) cambiarSeccion(1);
            });

            actualizarBotones();

            function mostrarPantallaCarga() {
                loadingOverlay.style.display = 'flex';
                loadingSpinner.style.display = 'block';
                successIcon.style.display = 'none';
                loadingText.textContent = 'Guardando respuestas...';
                loadingSubtext.textContent = 'Por favor espera un momento';
            }

            function mostrarExito() {
                loadingSpinner.style.display = 'none';
                successIcon.style.display = 'block';
                loadingText.textContent = '¬°Respuestas guardadas!';
                loadingSubtext.textContent = 'Redirigiendo...';
            }

            function ocultarPantallaCarga() {
                loadingOverlay.style.display = 'none';
            }

            formulario.addEventListener('submit', async function(e) {
                e.preventDefault();

                const datos = {};
                
                // Recopilar todas las respuestas
                for (let i = 1; i <= 18; i++) {
                    const pregunta = `pregunta${i}`;
                    
                    if ([3, 7, 12, 15, 18].includes(i)) {
                        // Preguntas de textarea
                        const textarea = document.querySelector(`textarea[name="${pregunta}"]`);
                        datos[pregunta] = textarea ? textarea.value.trim() : '';
                    } else {
                        // Preguntas de radio
                        const radioSeleccionado = document.querySelector(`input[name="${pregunta}"]:checked`);
                        datos[pregunta] = radioSeleccionado ? radioSeleccionado.value : '';
                    }
                }

                // Verificar respuestas vac√≠as
                const respuestasVacias = [];
                for (let i = 1; i <= 18; i++) {
                    const pregunta = `pregunta${i}`;
                    if (!datos[pregunta]) {
                        respuestasVacias.push(i);
                    }
                }
                
                if (respuestasVacias.length > 0) {
                    alert(`Por favor responde todas las preguntas. Faltan: ${respuestasVacias.join(', ')}`);
                    return;
                }

                // Mostrar pantalla de carga
                mostrarPantallaCarga();

                try {
                    const respuesta = await fetch('http://localhost:3000/api/submit', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json'
                        },
                        body: JSON.stringify(datos)
                    });

                    if (respuesta.ok) {
                        // Simular tiempo de procesamiento (m√≠nimo 3 segundos)
                        setTimeout(() => {
                            mostrarExito();
                            
                            // Despu√©s de 2 segundos m√°s, redirigir
                            setTimeout(() => {
                                // Cambia 'chat.html' por la URL de tu p√°gina destino
                                window.location.href = 'chat.html';
                            }, 2000);
                        }, 3000);
                        
                    } else {
                        const errorText = await respuesta.text();
                        ocultarPantallaCarga();
                        alert('Hubo un error al enviar las respuestas: ' + errorText);
                    }
                } catch (error) {
                    ocultarPantallaCarga();
                    alert('No se pudo conectar con el servidor. Aseg√∫rate de que est√© encendido.');
                }
            });
        });
    </script>

</body>
</html>